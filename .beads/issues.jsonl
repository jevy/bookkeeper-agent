{"id":"google-drive-bookeeping-057","title":"GitHub Actions CI: build and push image","description":"Create .github/workflows/build.yaml. On push to main: build the Gradle project, run tests, build Docker image, push to container registry. Include caching for Gradle dependencies.","status":"closed","priority":3,"issue_type":"task","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:32:21.391027355-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:55:19.694028454-05:00","closed_at":"2026-02-21T14:55:19.694028454-05:00","close_reason":"GitHub Actions CI: build, test, Docker build+push to ghcr.io with Gradle caching","dependencies":[{"issue_id":"google-drive-bookeeping-057","depends_on_id":"google-drive-bookeeping-ohl","type":"blocks","created_at":"2026-02-21T14:32:48.54783-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-057","depends_on_id":"google-drive-bookeeping-6ka","type":"parent-child","created_at":"2026-02-21T14:35:07.962362305-05:00","created_by":"Jevin Maltais"}]}
{"id":"google-drive-bookeeping-1q9","title":"Avro schema and code generation","description":"Define Transaction.avsc under src/main/avro/ per the spec. Configure the Gradle Avro plugin to generate Kotlin/Java classes from the schema. Fields: transaction_id, date, description, category (nullable), amount, account, account_number, institution, month, week, check_number, full_description, note, source, date_added, sheet_row_number.","status":"closed","priority":1,"issue_type":"task","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:31:39.00814115-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:40:55.960203758-05:00","closed_at":"2026-02-21T14:40:55.960203758-05:00","close_reason":"Transaction.avsc and Gradle Avro plugin already configured in scaffolding task. Code generation verified working.","dependencies":[{"issue_id":"google-drive-bookeeping-1q9","depends_on_id":"google-drive-bookeeping-3cc","type":"blocks","created_at":"2026-02-21T14:32:26.835250229-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-1q9","depends_on_id":"google-drive-bookeeping-6ka","type":"parent-child","created_at":"2026-02-21T14:35:06.608772447-05:00","created_by":"Jevin Maltais"}]}
{"id":"google-drive-bookeeping-3cc","title":"Project scaffolding: Gradle, dependencies, and directory structure","description":"Set up the Kotlin/Gradle project with Kotlin DSL. Add all dependencies: kafka-clients, avro, confluent avro serde, google-api-services-sheets, okhttp/ktor-client, logback. Create the package directory structure under src/main/kotlin/org/jevy/tiller/categorizer/. Create settings.gradle.kts, build.gradle.kts, gradle.properties.","status":"closed","priority":0,"issue_type":"task","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:31:36.896646029-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:40:45.436577609-05:00","closed_at":"2026-02-21T14:40:45.436577609-05:00","close_reason":"Created settings.gradle.kts, build.gradle.kts, gradle.properties, Transaction.avsc, Gradle wrapper, and full directory structure. Build succeeds with Avro code generation.","dependencies":[{"issue_id":"google-drive-bookeeping-3cc","depends_on_id":"google-drive-bookeeping-6ka","type":"parent-child","created_at":"2026-02-21T14:35:06.520984614-05:00","created_by":"Jevin Maltais"}]}
{"id":"google-drive-bookeeping-6ka","title":"Tiller Categorizer Agent","description":"Automated transaction categorization for Tiller (Yodlee -\u003e Google Sheets) bookkeeping. Three services (Producer, Categorizer Agent, Category Writer) packaged as a single Docker image with different entrypoints, connected via Redpanda/Kafka with Avro serialization. See SPEC.md for full details.","status":"closed","priority":0,"issue_type":"epic","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:34:52.555832287-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:55:30.279722957-05:00","closed_at":"2026-02-21T14:55:30.279722957-05:00","close_reason":"All 16 tasks complete. Full Kotlin/Gradle project with 3 services (Producer, Categorizer Agent, Writer), Kafka/Avro infra, Google Sheets client, OpenRouter AI agent with tools, Dockerfile, K8s manifests, and CI pipeline."}
{"id":"google-drive-bookeeping-6te","title":"Logback configuration","description":"Create src/main/resources/logback.xml with sensible defaults: INFO level, console appender with structured format, DEBUG level for org.jevy.tiller.categorizer namespace.","status":"closed","priority":3,"issue_type":"task","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:32:19.43998706-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:43:27.128040728-05:00","closed_at":"2026-02-21T14:43:27.128040728-05:00","close_reason":"logback.xml with console appender, DEBUG for app, WARN for Kafka","dependencies":[{"issue_id":"google-drive-bookeeping-6te","depends_on_id":"google-drive-bookeeping-3cc","type":"blocks","created_at":"2026-02-21T14:32:49.654384565-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-6te","depends_on_id":"google-drive-bookeeping-6ka","type":"parent-child","created_at":"2026-02-21T14:35:07.86807826-05:00","created_by":"Jevin Maltais"}]}
{"id":"google-drive-bookeeping-7h1","title":"AppConfig: environment variable configuration","description":"Create config/AppConfig.kt that reads all environment variables: KAFKA_BOOTSTRAP_SERVERS, SCHEMA_REGISTRY_URL, GOOGLE_SHEET_ID, GOOGLE_CREDENTIALS_JSON, OPENROUTER_API_KEY, POLL_INTERVAL_SECONDS (default 300). Provide typed accessors with validation for required vars per service role.","status":"closed","priority":1,"issue_type":"task","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:31:39.123090212-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:43:26.93325307-05:00","closed_at":"2026-02-21T14:43:26.93325307-05:00","close_reason":"AppConfig data class with fromEnv() reading all env vars per spec","dependencies":[{"issue_id":"google-drive-bookeeping-7h1","depends_on_id":"google-drive-bookeeping-3cc","type":"blocks","created_at":"2026-02-21T14:32:29.405336886-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-7h1","depends_on_id":"google-drive-bookeeping-6ka","type":"parent-child","created_at":"2026-02-21T14:35:06.700451622-05:00","created_by":"Jevin Maltais"}]}
{"id":"google-drive-bookeeping-8ca","title":"Agent tool: SheetLookupTool","description":"Create categorizer/tools/SheetLookupTool.kt. Implements the sheet_lookup tool for the categorizer agent. Takes a query string, searches past categorized transactions in the Google Sheet by matching against Description or Full Description columns. Returns matching rows with their categories. Used by the agent to learn from historical categorization patterns.","status":"closed","priority":2,"issue_type":"task","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:32:00.057251162-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:43:41.506484114-05:00","closed_at":"2026-02-21T14:43:41.506484114-05:00","close_reason":"SheetLookupTool querying SheetsClient.searchByDescription with tool definition","dependencies":[{"issue_id":"google-drive-bookeeping-8ca","depends_on_id":"google-drive-bookeeping-qx2","type":"blocks","created_at":"2026-02-21T14:32:38.417058551-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-8ca","depends_on_id":"google-drive-bookeeping-6ka","type":"parent-child","created_at":"2026-02-21T14:35:07.283164238-05:00","created_by":"Jevin Maltais"}]}
{"id":"google-drive-bookeeping-9wx","title":"Service 2: Categorizer Agent orchestration","description":"Create categorizer/CategorizerAgent.kt. Consumes from transactions.uncategorized. For each transaction: (1) invoke Sonnet 4.6 via OpenRouterClient with system prompt and tool definitions, (2) handle the agent loop - execute tool calls (sheet_lookup, web_search) and feed results back until the agent returns a category, (3) if category determined, publish to transactions.categorized, (4) if agent cannot determine category, publish to transactions.categorization-failed. Idempotent: skip transactions already categorized (race condition).","status":"closed","priority":1,"issue_type":"feature","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:32:06.365944733-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:43:41.705480633-05:00","closed_at":"2026-02-21T14:43:41.705480633-05:00","close_reason":"CategorizerAgent with agent loop, tool dispatch, multi-round tool use, publishes to categorized/failed topics","dependencies":[{"issue_id":"google-drive-bookeeping-9wx","depends_on_id":"google-drive-bookeeping-n3e","type":"blocks","created_at":"2026-02-21T14:32:41.504985081-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-9wx","depends_on_id":"google-drive-bookeeping-8ca","type":"blocks","created_at":"2026-02-21T14:32:41.603442174-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-9wx","depends_on_id":"google-drive-bookeeping-f4u","type":"blocks","created_at":"2026-02-21T14:32:41.695264617-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-9wx","depends_on_id":"google-drive-bookeeping-s1k","type":"blocks","created_at":"2026-02-21T14:32:41.788029411-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-9wx","depends_on_id":"google-drive-bookeeping-6ka","type":"parent-child","created_at":"2026-02-21T14:35:07.484855739-05:00","created_by":"Jevin Maltais"}]}
{"id":"google-drive-bookeeping-aak","title":"Service 1: Transaction Producer","description":"Create producer/TransactionProducer.kt. Polls Google Sheet on a configurable interval (default 5 min). On each cycle: read all rows, filter to rows where Category is blank, publish each to transactions.uncategorized with Transaction ID as Kafka key and Avro-serialized Transaction as value. Stateless - re-publishes all uncategorized rows every cycle (Kafka compaction handles dedup). Log and skip individual rows that fail to serialize/publish.","status":"closed","priority":1,"issue_type":"feature","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:31:52.483170636-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:43:41.607483989-05:00","closed_at":"2026-02-21T14:43:41.607483989-05:00","close_reason":"TransactionProducer polling sheet, filtering uncategorized, publishing to Kafka","dependencies":[{"issue_id":"google-drive-bookeeping-aak","depends_on_id":"google-drive-bookeeping-qx2","type":"blocks","created_at":"2026-02-21T14:32:35.545581561-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-aak","depends_on_id":"google-drive-bookeeping-s1k","type":"blocks","created_at":"2026-02-21T14:32:35.637774244-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-aak","depends_on_id":"google-drive-bookeeping-6ka","type":"parent-child","created_at":"2026-02-21T14:35:07.092291895-05:00","created_by":"Jevin Maltais"}]}
{"id":"google-drive-bookeeping-f4u","title":"Agent tool: WebSearchTool","description":"Create categorizer/tools/WebSearchTool.kt. Implements the web_search tool for the categorizer agent. Takes a search query, calls an external search API (Brave Search API, SerpAPI, or similar) to identify unfamiliar merchants or transaction descriptions. Returns search results as text for the agent to interpret.","status":"closed","priority":2,"issue_type":"task","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:32:02.187772064-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:43:41.410508678-05:00","closed_at":"2026-02-21T14:43:41.410508678-05:00","close_reason":"WebSearchTool using Brave Search API with tool definition","dependencies":[{"issue_id":"google-drive-bookeeping-f4u","depends_on_id":"google-drive-bookeeping-3cc","type":"blocks","created_at":"2026-02-21T14:32:39.778596558-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-f4u","depends_on_id":"google-drive-bookeeping-6ka","type":"parent-child","created_at":"2026-02-21T14:35:07.383739851-05:00","created_by":"Jevin Maltais"}]}
{"id":"google-drive-bookeeping-n3e","title":"OpenRouter API client (OpenRouterClient.kt)","description":"Create categorizer/OpenRouterClient.kt. HTTP client (OkHttp or ktor) that calls the OpenRouter API with model anthropic/claude-sonnet-4.6. Support function calling / tool use protocol. Handle request/response serialization, error handling, and retries. Accept system prompt and tool definitions. Return structured responses including tool call requests.","status":"closed","priority":1,"issue_type":"task","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:31:55.059656894-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:43:41.321298271-05:00","closed_at":"2026-02-21T14:43:41.321298271-05:00","close_reason":"OpenRouterClient with chat completion, tool call support, message/response types","dependencies":[{"issue_id":"google-drive-bookeeping-n3e","depends_on_id":"google-drive-bookeeping-3cc","type":"blocks","created_at":"2026-02-21T14:32:36.71474759-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-n3e","depends_on_id":"google-drive-bookeeping-7h1","type":"blocks","created_at":"2026-02-21T14:32:36.801239996-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-n3e","depends_on_id":"google-drive-bookeeping-6ka","type":"parent-child","created_at":"2026-02-21T14:35:07.185438639-05:00","created_by":"Jevin Maltais"}]}
{"id":"google-drive-bookeeping-n7y","title":"Main.kt CLI entrypoint","description":"Create Main.kt that parses a CLI argument (producer | categorizer | writer) and launches the corresponding service. Exit with usage error if argument is missing or unrecognized.","status":"closed","priority":1,"issue_type":"task","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:31:39.237570488-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:43:27.039936808-05:00","closed_at":"2026-02-21T14:43:27.039936808-05:00","close_reason":"Main.kt CLI with producer|categorizer|writer subcommands","dependencies":[{"issue_id":"google-drive-bookeeping-n7y","depends_on_id":"google-drive-bookeeping-3cc","type":"blocks","created_at":"2026-02-21T14:32:30.847345401-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-n7y","depends_on_id":"google-drive-bookeeping-6ka","type":"parent-child","created_at":"2026-02-21T14:35:06.801369689-05:00","created_by":"Jevin Maltais"}]}
{"id":"google-drive-bookeeping-ohl","title":"Dockerfile: single image, multiple entrypoints","description":"Create a Dockerfile that builds the Kotlin/Gradle project and produces a single image. The image should accept a CLI argument (producer, categorizer, writer) to select the service entrypoint. Use multi-stage build: Gradle build stage -\u003e slim JRE runtime stage. Copy the fat JAR or application distribution.","status":"closed","priority":2,"issue_type":"task","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:32:14.968047404-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:43:58.900675011-05:00","closed_at":"2026-02-21T14:43:58.900675011-05:00","close_reason":"Multi-stage Dockerfile: Gradle build -\u003e JRE runtime, uses installDist for application distribution","dependencies":[{"issue_id":"google-drive-bookeeping-ohl","depends_on_id":"google-drive-bookeeping-aak","type":"blocks","created_at":"2026-02-21T14:32:44.292807055-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-ohl","depends_on_id":"google-drive-bookeeping-9wx","type":"blocks","created_at":"2026-02-21T14:32:44.373130696-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-ohl","depends_on_id":"google-drive-bookeeping-r2c","type":"blocks","created_at":"2026-02-21T14:32:44.452600797-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-ohl","depends_on_id":"google-drive-bookeeping-n7y","type":"blocks","created_at":"2026-02-21T14:32:44.536221761-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-ohl","depends_on_id":"google-drive-bookeeping-6ka","type":"parent-child","created_at":"2026-02-21T14:35:07.675475362-05:00","created_by":"Jevin Maltais"}]}
{"id":"google-drive-bookeeping-qx2","title":"Google Sheets client (SheetsClient.kt)","description":"Create sheets/SheetsClient.kt that authenticates via service account JSON and provides: (1) readAllTransactions() - read all rows from the Transactions tab, mapping columns A-U to a data structure. (2) readUncategorized() - filter to rows where Category (column C) is blank. (3) writeCategory(transactionId, category, rowHint) - write category to column C for a given row, with Transaction ID lookup fallback per row number stability section. (4) searchByDescription(query) - search categorized transactions by description for the agent's sheet_lookup tool.","status":"closed","priority":1,"issue_type":"task","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:31:45.768047064-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:43:41.232719279-05:00","closed_at":"2026-02-21T14:43:41.232719279-05:00","close_reason":"SheetsClient with service account auth, readAllRows, writeCell, searchByDescription","dependencies":[{"issue_id":"google-drive-bookeeping-qx2","depends_on_id":"google-drive-bookeeping-3cc","type":"blocks","created_at":"2026-02-21T14:32:32.308563141-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-qx2","depends_on_id":"google-drive-bookeeping-7h1","type":"blocks","created_at":"2026-02-21T14:32:32.387486765-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-qx2","depends_on_id":"google-drive-bookeeping-6ka","type":"parent-child","created_at":"2026-02-21T14:35:06.892089089-05:00","created_by":"Jevin Maltais"}]}
{"id":"google-drive-bookeeping-r2c","title":"Service 3: Category Writer","description":"Create writer/CategoryWriter.kt. Consumes from transactions.categorized. For each message: (1) find matching row in Google Sheet by Transaction ID (use sheet_row_number as hint, fall back to full scan), (2) write the category to column C, (3) optionally write categorized date to column P. Idempotent: if row already has a category, skip. If row not found (deleted), log and commit offset.","status":"closed","priority":1,"issue_type":"feature","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:32:10.420235709-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:43:41.793916448-05:00","closed_at":"2026-02-21T14:43:41.793916448-05:00","close_reason":"CategoryWriter consuming categorized topic, row lookup with hint optimization, idempotent write-back","dependencies":[{"issue_id":"google-drive-bookeeping-r2c","depends_on_id":"google-drive-bookeeping-qx2","type":"blocks","created_at":"2026-02-21T14:32:43.15603478-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-r2c","depends_on_id":"google-drive-bookeeping-s1k","type":"blocks","created_at":"2026-02-21T14:32:43.242829276-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-r2c","depends_on_id":"google-drive-bookeeping-6ka","type":"parent-child","created_at":"2026-02-21T14:35:07.588270097-05:00","created_by":"Jevin Maltais"}]}
{"id":"google-drive-bookeeping-s1k","title":"Kafka infrastructure: KafkaFactory and TopicNames","description":"Create kafka/TopicNames.kt with constants: transactions.uncategorized, transactions.categorized, transactions.categorization-failed. Create kafka/KafkaFactory.kt that builds Kafka producers and consumers configured with Confluent Avro serializer/deserializer, schema registry URL, and bootstrap servers. Producers keyed by String (Transaction ID), values as Avro Transaction records.","status":"closed","priority":1,"issue_type":"task","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:31:48.703573335-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:43:41.12015405-05:00","closed_at":"2026-02-21T14:43:41.12015405-05:00","close_reason":"KafkaFactory with Avro serde producer/consumer creation, TopicNames constants","dependencies":[{"issue_id":"google-drive-bookeeping-s1k","depends_on_id":"google-drive-bookeeping-3cc","type":"blocks","created_at":"2026-02-21T14:32:33.703510354-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-s1k","depends_on_id":"google-drive-bookeeping-1q9","type":"blocks","created_at":"2026-02-21T14:32:33.796425013-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-s1k","depends_on_id":"google-drive-bookeeping-7h1","type":"blocks","created_at":"2026-02-21T14:32:33.880907212-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-s1k","depends_on_id":"google-drive-bookeeping-6ka","type":"parent-child","created_at":"2026-02-21T14:35:06.993689197-05:00","created_by":"Jevin Maltais"}]}
{"id":"google-drive-bookeeping-xpf","title":"Kubernetes manifests","description":"Create k8s/ directory with: deployment-producer.yaml, deployment-categorizer.yaml, deployment-writer.yaml, and kustomization.yaml. All three deployments use the same image with different args (producer/categorizer/writer). Configure env vars from secrets/configmaps: KAFKA_BOOTSTRAP_SERVERS, SCHEMA_REGISTRY_URL, GOOGLE_SHEET_ID, GOOGLE_CREDENTIALS_JSON, OPENROUTER_API_KEY, POLL_INTERVAL_SECONDS. Broker: redpanda.apps.svc.cluster.local:9093, Schema Registry: http://redpanda.apps.svc.cluster.local:8081.","status":"closed","priority":2,"issue_type":"task","owner":"jevin@quickjack.ca","created_at":"2026-02-21T14:32:18.103501732-05:00","created_by":"Jevin Maltais","updated_at":"2026-02-21T14:55:19.613666004-05:00","closed_at":"2026-02-21T14:55:19.613666004-05:00","close_reason":"K8s manifests: 3 deployments (producer/categorizer/writer) with shared image, secrets, kustomization","dependencies":[{"issue_id":"google-drive-bookeeping-xpf","depends_on_id":"google-drive-bookeeping-ohl","type":"blocks","created_at":"2026-02-21T14:32:45.671352142-05:00","created_by":"Jevin Maltais"},{"issue_id":"google-drive-bookeeping-xpf","depends_on_id":"google-drive-bookeeping-6ka","type":"parent-child","created_at":"2026-02-21T14:35:07.776268032-05:00","created_by":"Jevin Maltais"}]}
